<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Jessie Math - æ€æ¨£è§£é¡ŒPRO</title>

  <!-- âœ… åˆ†äº«é è¦½ï¼ˆLINE/FB/é€šç”¨ï¼‰ï¼šæ§åˆ¶ä½ æˆªåœ–é‚£ç¨®å¡ç‰‡é¡¯ç¤º -->
  <!-- æ§åˆ¶é è¦½å¡ç‰‡é‚£è¡Œæ–‡å­—ï¼ˆå¾ˆå¤šå¹³å°æœƒæŠ“é€™å€‹ï¼‰ -->
  <meta name="description" content="Â© 2025â€“2026 Jessie Math æ·æè€å¸«. All rights reserved.">

  <!-- âœ… LINE / FB é è¦½ç”¨ -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Jessie Math - æ€æ¨£è§£é¡Œ (ä¸€)">
  <meta property="og:title" content="Jessie Math - æ€æ¨£è§£é¡ŒPRO">
  <meta property="og:description" content="Â© 2025â€“2026 Jessie Math æ·æè€å¸«. All rights reserved.">

  <!-- âœ… é è¦½åœ–ç‰‡ï¼ˆæŠŠæª”åæ›æˆä½ çš„ä¸»é¡Œåœ–ï¼Œä¾‹å¦‚ g6-u9-1.pngï¼‰ -->
  <meta property="og:image" content="g6-u9-1.png">
  <meta property="og:image:width" content="1024">
  <meta property="og:image:height" content="1536">
  <meta property="og:image:alt" content="Jessie Math éŠæˆ²å°é¢">

  <!-- âœ… æœ‰äº›å¹³å°æœƒåƒè€ƒ -->
  <link rel="image_src" href="g6-u9-1.png">

  <!-- âœ… Twitter / Xï¼ˆå¯ç”¨åŒä¸€å¼µåœ–ï¼‰ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Jessie Math - æ€æ¨£è§£é¡Œ (ä¸€)">
  <meta name="twitter:description" content="Â© 2025â€“2026 Jessie Math æ·æè€å¸«. All rights reserved.">
  <meta name="twitter:image" content="g6-u9-1.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">

  <!-- Font Awesome for footer icon -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

  <style>
    :root{
      /* æ¥µç°¡æœªä¾†é…è‰² - ä½é£½å’Œå°ˆæ¥­æ„Ÿ */
      --ink: #0f172a;
      --muted: #64748b;
      --line: #f1f5f9;
      --bg-page: #fdfdfd;

      --brand: #2563eb;
      --brand-soft: rgba(37, 99, 235, 0.05);
      --brand-hover: #1d4ed8;

      --accent: #0ea5e9;

      --good: #059669;
      --bad: #dc2626;
      --warn: #d97706;

      --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
      --shadow-md: 0 10px 30px -10px rgba(0,0,0,0.08);

      --radius: 16px;
      --max: 1100px;
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: 'Inter', 'Noto Sans TC', system-ui, sans-serif;
      color: var(--ink);
      background-color: var(--bg-page);
      background-image:
        radial-gradient(at 100% 0%, rgba(14, 165, 233, 0.05) 0px, transparent 40%),
        radial-gradient(at 0% 100%, rgba(37, 99, 235, 0.05) 0px, transparent 40%);
      background-attachment: fixed;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    a{ text-decoration:none; color:inherit; transition:opacity .2s; }
    button{ font-family:inherit; border:none; outline:none; background:none; }

    /* ====== HEADER ====== */
    .hero{
      background: rgba(255, 255, 255, 0.7);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      padding: 16px 24px;
      position: sticky;
      top:0;
      z-index: 50;
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
    }
    .hero-inner{
      max-width: var(--max);
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px; /* RWDï¼šé¿å…æ“ å£“ */
    }

    .brand{ display: flex; align-items: center; gap: 14px; min-width: 180px; }

    .avatarRing{
      width: 40px; height: 40px;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      background: #fff;
      display: grid; place-items: center;
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      flex: 0 0 auto;
    }
    .avatarRing img{ width: 100%; height: 100%; object-fit: contain; }

    .brandText{
      font-size: 20px; font-weight: 800; color: var(--ink); letter-spacing: -0.01em;
      white-space: nowrap;
    }

    .nav{
      display: flex;
      align-items: center;
      gap: 4px;
      flex-wrap: wrap; /* RWDï¼šæ¡Œæ©Ÿä¹Ÿèƒ½æ›è¡Œä¸çˆ†ç‰ˆ */
      justify-content: flex-end;
    }
    .nav a{
      padding: 8px 16px;
      border-radius: 12px;
      font-size: 14px; font-weight: 600;
      color: var(--muted);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      white-space: nowrap;
    }
    .nav a:hover{ background: #f8fafc; color: var(--ink); }
    .nav a.current{ background: var(--brand-soft); color: var(--brand); }

    /* ====== MAIN LAYOUT ====== */
    main.wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 40px 24px 80px;
      width: 100%;
      flex: 1 0 auto;
    }

    /* ä½ åœˆèµ·ä¾†é‚£å¡Šï¼šæ•´æ®µä¸é¡¯ç¤ºï¼ˆä¸å½±éŸ¿å…¶ä»–çµæ§‹ï¼‰ */
    .titleRow{ display:none; }

    /* ====== GRID ====== */
    .grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 32px;
      align-items: start;
    }
    .grid.withSide{
      grid-template-columns: 1fr 340px;
    }

    /* ====== CARDS ====== */
    .card{
      background: #ffffff;
      border-radius: var(--radius);
      box-shadow: var(--shadow-md);
      overflow: hidden;
      border: 1px solid rgba(226, 232, 240, 0.6);
      position: relative;
      min-width: 0; /* RWDï¼šé¿å…å…§å®¹æ’çˆ† grid */
    }
    .cardHd{
      padding: 20px 28px;
      border-bottom: 1px solid var(--line);
      display: flex; justify-content: space-between; align-items: center;
      gap: 12px;
    }
    .cardHd h3{
      margin:0;
      font-size: 15px;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .cardBd{ padding: 28px; }

    /* ====== BUTTONS ====== */
    .btnRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top: 24px;
    }

    .btn{
      cursor: pointer;
      display: inline-flex; align-items: center; gap: 8px;
      padding: 10px 20px;
      border-radius: 12px;
      font-size: 14px; font-weight: 600;
      border: 1px solid #e2e8f0;
      background: #fff; color: var(--ink);
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 0;
    }
    .btn:hover:not(:disabled){ background: #f8fafc; border-color: #cbd5e1; transform: translateY(-1px); }
    .btn:active{ transform: translateY(0); }
    .btn.primary{
      background: var(--brand); color: #fff; border-color: var(--brand);
      box-shadow: 0 4px 14px rgba(37, 99, 235, 0.2);
    }
    .btn.primary:hover{ background: var(--brand-hover); }
    .btn.warn{ background: #fffbeb; color: #92400e; border-color: #fef3c7; }
    .btn.danger{ background: #fef2f2; color: #b91c1c; border-color: #fee2e2; }
    .btn:disabled{ opacity: 0.4; cursor: not-allowed; pointer-events: none; }

    /* ====== GAME UI ====== */
    .screen{ display:none; animation: scaleUp 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
    .screen.active{ display:block; }
    @keyframes scaleUp{ from{opacity:0; transform: scale(0.98);} to{opacity:1; transform: scale(1);} }

    .kpis{
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }

    .kpi{
      background: #fcfdfe;
      border: 1px solid #f1f5f9;
      border-radius: 16px;
      padding: 16px;
      text-align: left;
      min-width: 0;
    }
    .kpi .t{ font-size: 11px; color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
    .kpi .v{ font-size: 24px; font-weight: 800; color: var(--ink); margin-top: 4px; }
    .mono{ font-variant-numeric: tabular-nums; }

    .illustration{
      background: #f8fafc;
      border: 1px solid #f1f5f9;
      border-radius: var(--radius);
      padding: 24px; margin: 24px 0;
      display: flex; align-items: center; gap: 24px;
      min-width: 0;
    }
    .illuSvg{ width: 56px; height: 56px; flex-shrink: 0; opacity: 0.8; }

    .qCard{
      background: #fff;
      border: 1px solid #f1f5f9;
      border-radius: var(--radius);
      padding: 32px;
      position: relative;
      box-shadow: var(--shadow-sm);
      min-width: 0;
    }
    .qTypeBadge{
      position: absolute; top: 16px; right: 24px;
      background: #f1f5f9; color: var(--muted);
      font-size: 11px; font-weight: 700;
      padding: 4px 10px; border-radius: 6px;
      text-transform: uppercase;
    }
    .qText{
      font-size: 20px; line-height: 1.6; font-weight: 700; color: var(--ink);
      margin: 8px 0 32px;
      word-break: break-word; /* RWDï¼šé•·é¡Œç›®ä¸çˆ†ç‰ˆ */
    }

    /* Answers & Inputs */
    .choices{ display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .choiceBtn{
      background: #fff;
      border: 1px solid #eef2f6;
      padding: 18px;
      border-radius: 14px;
      text-align: center;
      font-weight: 600;
      color: var(--ink);
      transition: all 0.2s;
      min-width: 0;
    }
    .choiceBtn:hover{ border-color: var(--brand); background: var(--brand-soft); color: var(--brand); }

    .inputRow{ display: flex; gap: 12px; align-items: stretch; }
    .in{
      flex: 1;
      min-width: 0;
      padding: 14px 20px;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      font-size: 18px; font-weight: 700;
      outline: none; transition: border-color 0.2s;
      background: #fcfdfe;
    }
    .in:focus{ border-color: var(--brand); background: #fff; }

    /* Feedback */
    .feedback{ margin-top: 24px; padding: 18px; border-radius: 14px; display: none; }
    .feedback.show{ display: block; animation: slideDown 0.3s ease-out; }
    .feedback.good{ background: #f0fdf4; border: 1px solid #dcfce7; color: var(--good); }
    .feedback.bad{ background: #fef2f2; border: 1px solid #fee2e2; color: var(--bad); }
    @keyframes slideDown{ from{opacity:0; transform:translateY(-10px);} to{opacity:1; transform:translateY(0);} }

    /* Overlay & Modal */
    .pauseOverlay{
      position: absolute; inset: 0; background: rgba(255,255,255,0.85);
      backdrop-filter: blur(8px); z-index: 10;
      display: none; place-items: center; border-radius: var(--radius);
    }
    .pauseOverlay.show{ display: grid; }

    .modal{
      position: fixed; inset: 0; background: rgba(15, 23, 42, 0.4);
      z-index: 100; display: none; place-items: center; padding: 20px;
      backdrop-filter: blur(10px);
    }
    .modal.show{ display: grid; }
    .modalBox{
      background: #fff; width: min(440px, 100%);
      border-radius: 24px; overflow: hidden;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.15);
    }
    .modalHd{ padding: 20px 24px; background: #fff; border-bottom: 1px solid var(--line); display: flex; justify-content: space-between; align-items: center; gap: 10px; }
    .modalBd{ padding: 28px; }

    /* Leaderboard */
    .lbRow{
      display: flex; justify-content: space-between; align-items: center;
      padding: 14px 18px; margin-bottom: 10px;
      background: #f8fafc; border-radius: 14px;
      border: 1px solid transparent; transition: all 0.2s;
      gap: 12px;
    }
    .lbRow:hover{ background: #fff; border-color: #e2e8f0; transform: translateX(4px); }
    .lbRank{
      width: 28px; height: 28px; background: #fff; color: var(--muted);
      border-radius: 8px; display: grid; place-items: center;
      font-weight: 700; font-size: 13px; border: 1px solid #eef2f6;
      flex: 0 0 auto;
    }
    .lbRow:nth-child(1) .lbRank{ border-color: #fde68a; color: #92400e; background: #fefce8; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }

    /* æ’è¡Œæ¦œï¼šé è¨­ä¸é¡¯ç¤ºï¼ˆåªåœ¨ç¬¬äºŒé é¸é—œå¡æ™‚é¡¯ç¤ºï¼‰ */
    #sideLB{ display:none; }

    /* ====== FOOTER PILL ====== */
    footer{
      width: 100%;
      flex: 0 0 auto;
      padding: 18px 16px 24px;
    }
    .footer-pill{
      max-width: var(--max);
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.72);
      border: 1px solid rgba(226, 232, 240, 0.85);
      border-radius: 999px;
      box-shadow: var(--shadow-sm);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      backdrop-filter: saturate(180%) blur(18px);
      -webkit-backdrop-filter: saturate(180%) blur(18px);
    }
    .footer-left, .footer-right{
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }
    .footer-dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: var(--brand);
      box-shadow: 0 0 0 6px rgba(37, 99, 235, 0.10);
      flex: 0 0 auto;
    }
    .footer-copy, .footer-tagline{
      font-size: 12px;
      color: var(--muted);
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 520px;
    }
    .footer-icon{
      width: 28px; height: 28px;
      border-radius: 10px;
      background: var(--brand-soft);
      display: grid;
      place-items: center;
      color: var(--brand);
      border: 1px solid rgba(37, 99, 235, 0.12);
      flex: 0 0 auto;
    }

    /* ====== RWD å¼·åŒ–ï¼šæ‰‹æ©Ÿ / å¹³æ¿ / æ¡Œæ©Ÿ ====== */
    @media (max-width: 960px){
      main.wrap{ padding: 28px 18px 48px; }
      .grid.withSide{ grid-template-columns: 1fr; }
      .cardBd{ padding: 22px; }
      .cardHd{ padding: 18px 20px; }
      .footer-pill{ border-radius: 24px; }
      .footer-copy, .footer-tagline{ max-width: 320px; }
    }

    @media (max-width: 768px){
      .hero{ padding: 12px 14px; }
      .hero-inner{
        flex-direction: column;
        align-items: stretch;
      }
      .brand{
        justify-content: center;
        min-width: 0;
      }
      .nav{
        width: 100%;
        flex-wrap: nowrap;           /* æ‰‹æ©Ÿï¼šç”¨æ»‘å‹•åˆ— */
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        justify-content: flex-start;
        padding-bottom: 2px;
      }
      .nav a{ flex: 0 0 auto; }
      main.wrap{ padding: 22px 14px 44px; }

      .kpis{ grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 22px; }
      .kpi{ padding: 14px; }
      .kpi .v{ font-size: 22px; }

      .illustration{ padding: 18px; gap: 14px; }
      .illuSvg{ width: 48px; height: 48px; }

      .qCard{ padding: 22px; }
      .qTypeBadge{ right: 16px; }
      .qText{ font-size: 18px; margin-bottom: 22px; }

      .choices{ grid-template-columns: 1fr; }
      .choiceBtn{ padding: 16px; }

      .inputRow{ flex-direction: column; }
      .in{ font-size: 18px; }
      .btnRow{ gap: 10px; }

      footer{ padding: 14px 12px 18px; }
      .footer-pill{
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        border-radius: 18px;
      }
      .footer-copy, .footer-tagline{
        white-space: normal;
        max-width: 100%;
      }
    }

    @media (max-width: 420px){
      .cardHd h3{ font-size: 13px; }
      .btn{ padding: 10px 14px; }
      .kpi .t{ font-size: 10px; }
      .kpi .v{ font-size: 20px; }
      .qText{ font-size: 17px; }
      .footer-icon{ width: 26px; height: 26px; }
    }

    @media (min-width: 1024px) and (max-width: 1280px){
      /* å¹³æ¿æ©«å‘ / å°ç­†é›»ï¼šç‰ˆé¢æ›´ç©© */
      main.wrap{ padding: 34px 22px 56px; }
      .grid.withSide{ grid-template-columns: 1fr 320px; }
    }

    @media (min-width: 1400px){
      /* å¤§è¢å¹•ï¼šä¸è¦å¤ªæ•£ */
      :root{ --max: 1180px; }
    }
  </style>
</head>
<body>

  <header class="hero">
    <div class="hero-inner">
      <a href="#" class="brand">
        <div class="avatarRing">
          <img src="JESSIEMATH-Q.png" alt="Jessie Math">
        </div>
        <div class="brandText">Jessie Math</div>
      </a>

      <nav class="nav">
        <a href="https://jessiemath0703-chu.github.io/website2/" target="_blank">é¦–é </a>
        <a href="https://jessiemath0703-chu.github.io/Game-Lobby/" target="_blank">éŠæˆ²å¤§å»³</a>
        <a href="https://jessiemath0703-chu.github.io/Game-Lobby/#g6-u9" target="_blank" class="current">å…­å¹´ç´šæ€æ¨£è§£é¡Œ</a>
      </nav>
    </div>
  </header>

  <main class="wrap">

    <!-- ä¿ç•™åŸç¢¼ä½†å·²ç”¨ CSS éš±è—ï¼ˆä½ åœˆèµ·ä¾†é‚£å¡Šä¸è¦ï¼‰ -->
    <div class="titleRow">
      <h1 class="hTitle">æ€æ¨£è§£é¡Œ (ä¸€)</h1>
      <p class="sub">å’Œå·®å•†ç©èˆ‡é›å…”å•é¡Œ Â· é€²éšé‚è¼¯è¨“ç·´</p>
      <div class="chipRow">
        <span class="chip">â±ï¸ 60 SECS</span>
        <span class="chip">âš¡ COMBO SYSTEM</span>
        <span class="chip">ğŸ“ GRADE 6</span>
      </div>
    </div>

    <div class="grid" id="mainGrid">
      <section class="card">
        <div class="cardHd">
          <h3 id="screenTitle">éŠæˆ²æ§åˆ¶å°</h3>
        </div>
        <div class="cardBd">

          <div id="screenWelcome" class="screen active">
            <div style="text-align:center; padding: 20px 0;">
              <h2 style="margin:0; font-size:24px; font-weight: 800;">æº–å‚™é–‹å§‹æ‚¨çš„æ•¸å­¸è©¦ç…‰</h2>
              <p style="color:var(--muted); margin:12px 0 32px; line-height:1.6;">
                é€™ä¸åªæ˜¯ä¸€å ´è¨ˆæ™‚æŒ‘æˆ°ï¼Œæ›´æ˜¯è¨“ç·´ã€Œä¸è®Šé‡ã€ç›´è¦ºçš„æœ€ä½³å ´åœ°ã€‚<br>
                åœ¨ 60 ç§’å…§çªç ´æ‚¨çš„é‚è¼¯ä¸Šé™ã€‚
              </p>
              <div class="btnRow" style="justify-content:center;">
                <button class="btn primary" onclick="app.checkNameAndGo()">é–‹å§‹éŠæˆ²</button>
                <button class="btn" onclick="app.toggleHow(true)">è¦å‰‡èªªæ˜</button>
              </div>
            </div>
          </div>

          <div id="screenSelect" class="screen">
             <div class="kpis">
               <div class="kpi"><div class="t">ç•¶å‰ä½¿ç”¨è€…</div><div class="v" id="uiName">-</div></div>
               <div class="kpi"><div class="t">é¸æ“‡æŒ‘æˆ°</div><div class="v" id="uiLvl" style="font-size:16px;">å°šæœªé¸æ“‡</div></div>
             </div>

             <div style="padding:4px;">
               <p style="font-weight:700; margin-bottom:14px; font-size:14px; color:var(--muted);">1. é¸æ“‡è§£é¡Œå–®å…ƒ</p>
               <div class="btnRow" id="lvlBtns" style="margin-top:0; gap:8px;"></div>

               <div style="height:1px; background:var(--line); margin:24px 0;"></div>

               <p style="font-weight:700; margin-bottom:14px; font-size:14px; color:var(--muted);">2. é¸æ“‡é‚è¼¯é›£åº¦</p>
               <div class="btnRow" id="diffBtns" style="margin-top:0; gap:8px;">
                 <button class="btn" onclick="app.setDiff('easy')" data-d="easy">è¼•é¬†æ¨¡å¼</button>
                 <button class="btn" onclick="app.setDiff('normal')" data-d="normal">æ¨™æº–é‹ç®—</button>
                 <button class="btn" onclick="app.setDiff('hard')" data-d="hard">æ¥µé™æŒ‘æˆ°</button>
               </div>
             </div>

             <div class="btnRow" style="margin-top:32px; justify-content:flex-end;">
               <button class="btn" onclick="app.changeName()">ä¿®æ”¹ä»£è™Ÿ</button>
               <button class="btn primary" id="btnStartGame" disabled onclick="app.startGame()" style="min-width:140px; justify-content:center;">
                 é€²å…¥è©¦ç…‰
               </button>
             </div>
          </div>

          <div id="screenGame" class="screen">
            <div class="kpis">
              <div class="kpi"><div class="t">æ™‚é–“é™åˆ¶</div><div class="v mono" id="hudTime">60</div></div>
              <div class="kpi"><div class="t">ç›®å‰ç©åˆ†</div><div class="v mono" id="hudScore">0</div></div>
              <div class="kpi"><div class="t">é€£æ“Šç´€éŒ„</div><div class="v mono" id="hudCombo">0</div></div>
              <div class="kpi"><div class="t">åˆ†æ•¸å€ç‡</div><div class="v mono" id="hudMult">x1</div></div>
            </div>

            <div class="btnRow" style="justify-content:flex-end; margin:0 0 20px;">
              <button class="btn warn" style="padding:6px 14px; font-size:12px;" onclick="app.pause(true)">æš«åœéŠæˆ²</button>
              <button class="btn" style="padding:6px 14px; font-size:12px;" onclick="app.toMenu()">æ”¾æ£„ä»»å‹™</button>
            </div>

            <div class="illustration">
              <div class="illuSvg" id="gameSvg"></div>
              <div>
                <div style="font-weight:700; font-size:16px; color:var(--brand);" id="gameIlluTitle">æƒ…å¢ƒæç¤º</div>
                <div style="font-size:14px; color:var(--muted); margin-top:4px;" id="gameIlluDesc">è¼‰å…¥ä¸­...</div>
              </div>
            </div>

            <div class="qCard">
              <span class="qTypeBadge" id="qBadge">å¡«å……é¡Œ</span>
              <div class="qText" id="qText">æ­£åœ¨æº–å‚™é¡Œç›®æ•¸æ“š...</div>

              <div id="answerZone"></div>

              <div class="feedback" id="feedback">
                <div style="font-weight:700; font-size:15px;" id="fbTitle"></div>
                <div style="font-size:14px; margin-top:4px; opacity:0.8;" id="fbDesc"></div>
              </div>
            </div>

            <div class="pauseOverlay" id="pauseOverlay">
              <div style="text-align: center;">
                <h2 style="margin:0 0 16px;">è©¦ç…‰æš«åœ</h2>
                <button class="btn primary" onclick="app.pause(false)">æ¢å¾©é€²åº¦</button>
              </div>
            </div>
          </div>

          <div id="screenResult" class="screen">
            <div style="text-align:center; padding:20px;">
              <h2 style="margin:0; font-size:28px;">è©¦ç…‰å ±å‘Š</h2>
              <div class="v stars" style="font-size:40px; margin:16px 0;" id="resStars">â˜…â˜…â˜…</div>
              <p style="color:var(--muted); font-size:16px;">è¡¨ç¾å“è¶Šï¼Œ<strong style="color:var(--ink);" id="resName"></strong>ï¼</p>

              <div style="display:flex; justify-content:center; gap:40px; margin:40px 0; flex-wrap:wrap;">
                <div style="text-align:center;">
                    <div style="font-size:12px; color:var(--muted); font-weight:700;">æœ€çµ‚ç©åˆ†</div>
                    <div style="font-size:36px; font-weight:800; color:var(--brand); margin-top:4px;" id="resScore">0</div>
                </div>
                <div style="text-align:center;">
                    <div style="font-size:12px; color:var(--muted); font-weight:700;">æœ€é«˜é€£æ“Š</div>
                    <div style="font-size:36px; font-weight:800; color:var(--ink); margin-top:4px;" id="resCombo">0</div>
                </div>
              </div>

              <div class="btnRow" style="justify-content:center;">
                <button class="btn primary" onclick="app.restart()">é‡å•ŸæŒ‘æˆ°</button>
                <button class="btn" onclick="app.toMenu()">ä¸»é¸å–®</button>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- æ’è¡Œæ¦œï¼šåªåœ¨ç¬¬äºŒé ï¼ˆé¸æ“‡é—œå¡ï¼‰é¡¯ç¤º -->
      <aside class="card" id="sideLB">
        <div class="cardHd">
          <h3>æ’è¡Œæˆå°±</h3>
        </div>
        <div class="cardBd">
          <div style="font-size:12px; color:var(--muted); margin-bottom:16px; font-weight:600; text-align:center; background:#f8fafc; padding:10px; border-radius:10px;">
            <span id="lbLabel">è«‹å…ˆé¸æ“‡å–®å…ƒæŸ¥çœ‹ç´€éŒ„</span>
          </div>
          <div id="lbList"></div>
          <button class="btn" style="width:100%; margin-top:24px; font-size:11px; justify-content:center; color:var(--muted);" onclick="app.clearLB()">
            æ¸…é™¤ç•¶å‰æ’è¡Œæ¦œ
          </button>
        </div>
      </aside>

    </div>
  </main>

  <footer>
    <div class="footer-pill">
      <div class="footer-left">
        <div class="footer-dot" aria-hidden="true"></div>
        <div class="footer-copy">Â© 2025â€“2026 Jessie Math æ·æè€å¸«. All rights reserved.</div>
      </div>
      <div class="footer-right">
        <div class="footer-icon" aria-hidden="true"><i class="fas fa-compass"></i></div>
        <div class="footer-tagline">æ•¸å­¸ä¸è¿·è·¯ï¼ŒJessie å¸¶ä½ èµ°å‘ç†è§£ã€‚</div>
      </div>
    </div>
  </footer>

  <div class="modal" id="modalName">
    <div class="modalBox">
      <div class="modalHd"><h4>ä½¿ç”¨è€…ä»£è™Ÿ</h4></div>
      <div class="modalBd">
        <div class="inputRow">
          <input type="text" class="in" id="inputName" placeholder="è«‹è¼¸å…¥ä»£è™Ÿ..." maxlength="10">
          <button class="btn primary" onclick="app.saveName()">ç¢ºå®š</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modalHow">
    <div class="modalBox">
      <div class="modalHd"><h4>è¦å‰‡èªªæ˜</h4><button onclick="app.toggleHow(false)">âœ•</button></div>
      <div class="modalBd" style="line-height:1.6; font-size:14px;">
        <ul style="padding-left:16px; color:var(--muted);">
          <li style="margin-bottom:12px;"><strong>è¨ˆæ™‚è¦å‰‡ï¼š</strong>æ¯å±€ 60 ç§’ï¼Œç­”å° +5sï¼Œç­”éŒ¯ -5sã€‚</li>
          <li style="margin-bottom:12px;"><strong>é€£æ“Šç³»çµ±ï¼š</strong>é€£çºŒç­”å°å¯ç²å¾—ç©åˆ†åŠ å€ï¼ˆæœ€é«˜ 3 å€ï¼‰ã€‚</li>
          <li><strong>ç›®æ¨™ï¼š</strong>çœ‹ç©¿é¡Œç›®ä¸­çš„ä¸è®Šé‡ï¼Œä»¥æœ€å¿«é€Ÿåº¦å®Œæˆè¨ˆç®—ã€‚</li>
        </ul>
        <button class="btn primary" style="width:100%; justify-content:center; margin-top:10px;" onclick="app.toggleHow(false)">é–‹å§‹æŒ‘æˆ°</button>
      </div>
    </div>
  </div>

  <script>
    // Logic remains exactly as requested (no changes to the JS functionality)
    const $ = s => document.querySelector(s);
    const $$ = s => document.querySelectorAll(s);
    const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

    const app = {
      state: {
        player: localStorage.getItem('JM_P9_NAME') || '',
        level: 0,
        diff: '',
        score: 0,
        time: 60,
        combo: 0,
        maxCombo: 0,
        timer: null,
        paused: false,
        q: null
      },

      levels: [
        {id:1, name:'å’Œä¸è®Šç†è«–', svg:`<circle cx="30" cy="30" r="25" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1.5"/><text x="30" y="38" text-anchor="middle" fill="#2563eb" font-weight="700" font-size="20">+</text>`},
        {id:2, name:'å·®ä¸è®Šç†è«–', svg:`<rect x="10" y="20" width="40" height="20" rx="4" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1.5"/><text x="30" y="38" text-anchor="middle" fill="#dc2626" font-weight="700" font-size="20">-</text>`},
        {id:3, name:'ç©ä¸è®Šç†è«–', svg:`<polygon points="30,8 52,50 8,50" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1.5"/><text x="30" y="44" text-anchor="middle" fill="#d97706" font-weight="700" font-size="20">Ã—</text>`},
        {id:4, name:'å•†ä¸è®Šç†è«–', svg:`<circle cx="30" cy="30" r="25" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1.5"/><line x1="18" y1="42" x2="42" y2="18" stroke="#64748b" stroke-width="2"/>`},
        {id:5, name:'é›å…”åŒç± ', svg:`<path d="M15 45 Q30 5 45 45" stroke="#2563eb" stroke-width="1.5" fill="none"/><circle cx="23" cy="35" r="2" fill="#2563eb"/><circle cx="37" cy="35" r="2" fill="#2563eb"/>`}
      ],

      init(){
        this.renderLvlBtns();
        this.updateLB();
        // é€²å…¥é é¢é è¨­ï¼šä¸é¡¯ç¤ºæ’è¡Œæ¦œï¼ˆåªåœ¨é¸é—œå¡é ï¼‰
        this.syncSide('screenWelcome');
      },

      // åªåœ¨ç¬¬äºŒé ï¼ˆscreenSelectï¼‰é¡¯ç¤ºæ’è¡Œæ¦œèˆ‡é›™æ¬„æ’ç‰ˆ
      syncSide(screenId){
        const grid = $('#mainGrid');
        const side = $('#sideLB');
        const isSelect = (screenId === 'screenSelect');
        grid.classList.toggle('withSide', isSelect);
        side.style.display = isSelect ? 'block' : 'none';
      },

      checkNameAndGo(){
        if(!this.state.player){
            $('#modalName').classList.add('show');
        } else {
            this.toSelect();
        }
      },

      saveName(){
        const name = $('#inputName').value.trim();
        if(name){
          this.state.player = name;
          localStorage.setItem('JM_P9_NAME', name);
          $('#modalName').classList.remove('show');
          $('#uiName').textContent = name;
          this.toSelect();
        }
      },

      changeName(){
        $('#inputName').value = this.state.player;
        $('#modalName').classList.add('show');
      },

      toSelect(){
        this.showScreen('screenSelect');
        $('#uiName').textContent = this.state.player;
      },

      showScreen(id){
        $$('.screen').forEach(el => el.classList.remove('active'));
        $('#'+id).classList.add('active');
        $('#screenTitle').textContent =
          id === 'screenWelcome' ? 'ä¸»é¸å–®' :
          id === 'screenSelect' ? 'åƒæ•¸è¨­å®š' :
          id === 'screenGame' ? 'ä»»å‹™åŸ·è¡Œä¸­' : 'ä»»å‹™å ±å‘Š';

        // é—œéµï¼šåªæœ‰é¸é—œå¡é æ‰é¡¯ç¤ºæ’è¡Œæ¦œ
        this.syncSide(id);
      },

      renderLvlBtns(){
        const box = $('#lvlBtns');
        box.innerHTML = this.levels.map(l =>
          `<button class="btn" onclick="app.setLevel(${l.id})" data-id="${l.id}">${l.name}</button>`
        ).join('');
      },

      setLevel(id){
        this.state.level = id;
        $$('#lvlBtns .btn').forEach(b => {
          b.classList.toggle('primary', parseInt(b.dataset.id) === id);
        });
        $('#uiLvl').textContent = this.levels.find(l=>l.id===id).name;
        this.checkStart();
        this.updateLB();
      },

      setDiff(d){
        this.state.diff = d;
        $$('#diffBtns .btn').forEach(b => {
          b.classList.toggle('primary', b.dataset.d === d);
        });
        this.checkStart();
        this.updateLB();
      },

      checkStart(){
        $('#btnStartGame').disabled = !(this.state.level && this.state.diff);
      },

      toggleHow(show){
        $('#modalHow').classList.toggle('show', show);
      },

      startGame(){
        this.state.score = 0;
        this.state.time = 60;
        this.state.combo = 0;
        this.state.maxCombo = 0;
        this.state.paused = false;

        this.showScreen('screenGame');
        $('#pauseOverlay').classList.remove('show');
        $('#feedback').classList.remove('show');

        const lvlInfo = this.levels.find(l => l.id === this.state.level);
        $('#gameSvg').innerHTML = lvlInfo.svg;
        $('#gameIlluTitle').textContent = lvlInfo.name;
        $('#gameIlluDesc').textContent = this.getLevelDesc(this.state.level);

        this.updateHUD();
        this.nextQuestion();

        clearInterval(this.state.timer);
        this.state.timer = setInterval(() => {
          if(!this.state.paused){
            this.state.time--;
            this.updateHUD();
            if(this.state.time <= 0) this.endGame();
          }
        }, 1000);
      },

      getLevelDesc(id){
        const descs = ["", "å’Œä¸€å®šï¼šAè®Šå¤§ï¼ŒBå°±è¦è®Šå°ã€‚", "å·®ä¸€å®šï¼šè·é›¢å›ºå®šï¼Œå…©è€…åŒæ­¥è®ŠåŒ–ã€‚", "ç©ä¸€å®šï¼šAè®Šå¤§ï¼ŒBå°±è¦ç¸®å°ã€‚", "å•†ä¸€å®šï¼šæ­£æ¯”é—œä¿‚ï¼ŒåŒæ­¥æ”¾å¤§ç¸®å°ã€‚", "é›å…”å•é¡Œï¼šé€éç¸½æ•¸èˆ‡è…³æ•¸é€²è¡Œå·®å€¼æ¨ç†ã€‚"];
        return descs[id];
      },

      pause(isPaused){
        this.state.paused = isPaused;
        $('#pauseOverlay').classList.toggle('show', isPaused);
      },

      restart(){
        this.startGame();
      },

      toMenu(){
        clearInterval(this.state.timer);
        this.showScreen('screenSelect');
      },

      updateHUD(){
        $('#hudTime').textContent = this.state.time;
        $('#hudScore').textContent = this.state.score;
        $('#hudCombo').textContent = this.state.combo;
        const mul = this.getMult();
        $('#hudMult').textContent = 'x' + mul;
        if(this.state.time <= 10) $('#hudTime').style.color = 'var(--bad)';
        else $('#hudTime').style.color = 'var(--ink)';
      },

      getMult(){
        if(this.state.combo >= 9) return 3;
        if(this.state.combo >= 6) return 2;
        if(this.state.combo >= 3) return 1.5;
        return 1;
      },

      nextQuestion(){
        $('#feedback').classList.remove('show');
        const q = this.genQuestion();
        this.state.q = q;

        $('#qBadge').textContent = q.type === 'fill' ? 'å¡«å……' : q.type === 'tf' ? 'æ˜¯é' : 'é¸æ“‡';
        $('#qText').textContent = q.text;

        const zone = $('#answerZone');
        zone.innerHTML = '';

        if(q.type === 'fill'){
          zone.innerHTML = `
            <div class="inputRow">
              <input type="number" class="in" id="ansInput" placeholder="è¼¸å…¥æ•¸å€¼" autocomplete="off">
              <button class="btn primary" onclick="app.checkAnswer()">ç¢ºèª</button>
            </div>
          `;
          setTimeout(()=>$('#ansInput').focus(), 50);
          $('#ansInput').onkeydown = (e) => { if(e.key === 'Enter') app.checkAnswer(); };
        } else if(q.type === 'mc'){
          const div = document.createElement('div');
          div.className = 'choices';
          q.opts.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'choiceBtn';
            btn.innerHTML = `<span>${opt}</span>`;
            btn.onclick = () => app.checkAnswer(opt);
            div.appendChild(btn);
          });
          zone.appendChild(div);
        } else { // tf
          const div = document.createElement('div');
          div.className = 'choices';
          ['O æ­£ç¢º', 'X éŒ¯èª¤'].forEach((txt, i) => {
            const btn = document.createElement('button');
            btn.className = 'choiceBtn';
            btn.textContent = txt;
            btn.onclick = () => app.checkAnswer(i === 0);
            div.appendChild(btn);
          });
          zone.appendChild(div);
        }
      },

      genQuestion(){
        const l = this.state.level;
        const d = this.state.diff;
        const max = d === 'easy' ? 20 : d === 'normal' ? 50 : 100;
        const min = d === 'easy' ? 2 : 5;

        let q = { text:'', ans:0, type: Math.random() > 0.6 ? 'fill' : Math.random() > 0.5 ? 'mc' : 'tf' };

        if(l === 5){
           const heads = rand(min + 5, max/2);
           const rabbits = rand(1, heads-1);
           const chickens = heads - rabbits;
           const legs = chickens*2 + rabbits*4;
           const askChicken = Math.random() > 0.5;
           q.text = `ç± å­è£¡æœ‰ ${heads} å€‹é ­ï¼Œ${legs} éš»è…³ã€‚è«‹å•æœ‰å¹¾éš»${askChicken ? 'é›' : 'å…”å­'}ï¼Ÿ`;
           q.ans = askChicken ? chickens : rabbits;
           q.explain = `è¨ˆç®—å…¬å¼ï¼š(è…³æ•¸ - 2Ã—é ­æ•¸) Ã· 2 = å…”æ•¸ã€‚`;
        } else {
           const a = rand(min, max);
           const b = rand(min, max);
           if(l === 1){
             const sum = a + b;
             q.text = `å…©æ•¸çš„å’Œæ˜¯ ${sum}ã€‚å…¶ä¸­ä¸€å€‹æ•¸æ˜¯ ${a}ï¼Œå¦ä¸€å€‹æ•¸æ˜¯ï¼Ÿ`;
             q.ans = b;
           } else if(l === 2){
             const big = Math.max(a, b);
             const small = Math.min(a, b);
             const diff = big - small;
             q.text = `å…©æ•¸ç›¸å·® ${diff}ã€‚å¤§æ•¸æ˜¯ ${big}ï¼Œå°æ•¸æ˜¯ï¼Ÿ`;
             q.ans = small;
           } else if(l === 3){
             const prod = a * b;
             q.text = `å…©æ•¸çš„ç©æ˜¯ ${prod}ã€‚å…¶ä¸­ä¸€å€‹æ•¸æ˜¯ ${a}ï¼Œå¦ä¸€æ•¸æ˜¯ï¼Ÿ`;
             q.ans = b;
           } else if(l === 4){
             q.text = `ç”² Ã· ä¹™ çš„å•†æ˜¯ ${a}ã€‚å¦‚æœä¹™æ˜¯ ${b}ï¼Œç”²æ˜¯å¤šå°‘ï¼Ÿ`;
             q.ans = a * b;
           }
        }

        if(q.type === 'mc'){
          let opts = new Set([q.ans]);
          while(opts.size < 4) opts.add(q.ans + rand(-10, 10));
          q.opts = Array.from(opts).sort(() => Math.random() - 0.5);
        }
        if(q.type === 'tf'){
          const isTrue = Math.random() > 0.5;
          if(!isTrue) {
            let fake = q.ans + rand(1, 5) * (Math.random() > 0.5 ? 1 : -1);
            q.text += ` ç­”æ¡ˆæ˜¯ ${fake} å—ï¼Ÿ`;
            q.ans = false;
          } else {
            q.text += ` ç­”æ¡ˆæ˜¯ ${q.ans} å—ï¼Ÿ`;
            q.ans = true;
          }
        }
        return q;
      },

      checkAnswer(val){
        if(val === undefined && this.state.q.type === 'fill') val = parseInt($('#ansInput').value);
        const isCorrect = val == this.state.q.ans;
        const fb = $('#feedback');

        if(isCorrect){
          this.state.combo++;
          if(this.state.combo > this.state.maxCombo) this.state.maxCombo = this.state.combo;
          this.state.time += 5;
          this.state.score += 10 * this.getMult();
          fb.className = 'feedback show good';
          $('#fbTitle').innerHTML = 'è§£æ³•æ­£ç¢º';
          $('#fbDesc').textContent = 'ç³»çµ±ç²å¾—é¡å¤– 5 ç§’ç·©è¡ã€‚';
        } else {
          this.state.combo = 0;
          this.state.time -= 5;
          fb.className = 'feedback show bad';
          $('#fbTitle').innerHTML = 'é‚è¼¯éŒ¯èª¤';
          const rightAns = this.state.q.type === 'tf' ? (this.state.q.ans ? 'O' : 'X') : this.state.q.ans;
          $('#fbDesc').textContent = `æ ¡æ­£å€¼ï¼š${rightAns}ã€‚`;
        }

        this.updateHUD();
        $$('#answerZone button, #answerZone input').forEach(e => e.disabled = true);
        setTimeout(() => { if(this.state.time > 0) this.nextQuestion(); }, 1200);
      },

      endGame(){
        clearInterval(this.state.timer);
        this.showScreen('screenResult');
        $('#resName').textContent = this.state.player;
        $('#resScore').textContent = this.state.score;
        $('#resCombo').textContent = this.state.maxCombo;
        let stars = this.state.score > 600 ? 'â˜…â˜…â˜…' : this.state.score > 300 ? 'â˜…â˜…â˜†' : 'â˜…â˜†â˜†';
        $('#resStars').textContent = stars;

        const key = `JM_LB_L${this.state.level}_${this.state.diff}`;
        let lb = JSON.parse(localStorage.getItem(key) || '[]');
        lb.push({ name: this.state.player, score: this.state.score });
        lb.sort((a,b) => b.score - a.score);
        localStorage.setItem(key, JSON.stringify(lb.slice(0, 10)));
        this.updateLB();
      },

      updateLB(){
        const key = `JM_LB_L${this.state.level}_${this.state.diff}`;
        const list = $('#lbList');
        if(!this.state.level || !this.state.diff) { list.innerHTML = ''; return; }
        const lb = JSON.parse(localStorage.getItem(key) || '[]');
        $('#lbLabel').textContent = `${this.levels.find(l=>l.id==this.state.level).name} (${this.state.diff})`;
        list.innerHTML = lb.length === 0 ? '<div style="text-align:center; color:var(--muted); padding:20px;">å°šç„¡ç´€éŒ„</div>' :
          lb.map((r, i) => `<div class="lbRow"><div style="display:flex; align-items:center; gap:12px; min-width:0;"><div class="lbRank">${i+1}</div><div style="font-weight:600; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:160px;">${r.name}</div></div><div class="mono" style="font-weight:700; color:var(--brand);">${r.score}</div></div>`).join('');
      },

      clearLB(){
        if(confirm('ç¢ºå®šæ¸…é™¤ç´€éŒ„ï¼Ÿ')){
          localStorage.removeItem(`JM_LB_L${this.state.level}_${this.state.diff}`);
          this.updateLB();
        }
      }
    };

    app.init();
  </script>
</body>
</html>
